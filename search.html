<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pop.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-title">
            <img src="lion.png" alt="Icon" class="navbar-icon">獅大圖書館</div>
        <ul class="nav-list">
            <li><a href="index.html">首頁</a></li>
            <li><a href="search.html">館藏搜尋</a></li>
            <li><a href="activity.html">活動報名</a></li>
            <li><a href="profile.html">個人資料</a></li>
        </ul>
    </nav>

    <div class="search-content">
        <div class="search-input">
            <div class="option-container">
                <select name="search-item" id="search-item" class="search-option" required>
                    <option value="" disabled selected>搜尋選擇</option>
                    <option value="book">書籍</option>
                    <option value="DVD">DVD</option>
                </select>
                <select name="search-by" id="search-by" class="search-option" required>
                    <option value="" disabled selected>搜尋方式</option>
                    <!-- Options will be dynamically generated based on the selection in search-item -->
                </select>
            </div>  
            <form class="search-form" id="search-form">
                <input type="text" placeholder="搜尋館藏" name="search" autocomplete="off">
                <button type="submit">搜尋</button>
            </form>
        </div>
        <div>
            <p style="line-height: 40px; color:#5f3f1c; font-weight: 700;">
                搜尋方式說明:<br>
                1.本館館藏包含書籍及DVD，請先選擇要搜尋的項目<br>
                2.選擇項目後即可選擇搜尋方式 ex. 書名，IBSN...<br>
                3.在選擇完之後即可輸入要搜尋的資料
            </p>
        </div>
    </div>

    <div class="pop-out">
        <input type="checkbox" id="show">
        <label for="show" class="show-btn">預約</label>
        <div class="container">
            <label for="show" class="close-btn" title="close">X</label>
            <div style="align-items: center; justify-content: center; display: flex; flex-direction: column;">
                <div class="text-title">
                    預約資料
                </div>
                <div class="text-container">
                    <div class="text">
                        名稱:
                    </div>
                    <div class="text">
                        排隊人數:
                    </div>
                    <div class="text">
                        預計日期:
                    </div>
                    <div class="text">
                        姓名:
                    </div>
                </div>
                <button class="act-btn" id="reg-btn">
                    預約
                </button>
            </div>
        </div>
     </div>

    <script>
        const searchItem = document.getElementById('search-item');
        const searchBy = document.getElementById('search-by');
        const searchForm = document.getElementById('search-form');

        const options = {
            book: [
                { value: 'book-title', text: '書名' },
                { value: 'IBSN', text: 'IBSN' },
                { value: 'author', text: '作者' },
                { value: 'genre', text: '類型' }
            ],
            DVD: [
                { value: 'dvd-title', text: 'DVD 名稱' },
                { value: 'director', text: '導演' },
                { value: 'genre', text: '類型' }
            ]
        };

        function updateSearchByOptions() {
            const selectedItem = searchItem.value;
            const selectedOptions = options[selectedItem] || [];

            searchBy.innerHTML = '<option value="" disabled selected>搜尋方式</option>'; // Clear existing options and add default option

            selectedOptions.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option.value;
                opt.textContent = option.text;
                searchBy.appendChild(opt);
            });
        }

        // Update options on change
        searchItem.addEventListener('change', updateSearchByOptions);

        // Form submission validation
        searchForm.addEventListener('submit', function(event) {
            if (!searchItem.value || !searchBy.value) {
                event.preventDefault(); // Prevent form submission
                alert('請選擇搜尋選擇及搜尋方式!');
            }
        });

        // Initialize the search-by options on page load
        updateSearchByOptions();

        document.getElementById('reg-btn').addEventListener('click', function() {
            document.getElementById('show').checked = false;
        });

    </script>

</body>
</html>
